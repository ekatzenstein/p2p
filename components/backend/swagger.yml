swagger: "2.0"
info:
  version: "0.1.0"
  title: "Pandas to Production"

host: "localhost"

basePath: "/api"

schemes:
  - "http"

paths:
  /sites/{siteId}/pages/:
    get:
      tags:
        - "pages"
      operationId: "listPages"
      parameters:
        - name: "siteId"
          in: "path"
          description: "Site ID"
          required: true
          type: "string"
      responses:
        200:
          description: ""
          schema:
            type: "array"
            items:
              $ref: "#/definitions/Page"
    post:
      tags:
        - "pages"
      operationId: "createPage"
      parameters:
        - name: "siteId"
          in: "path"
          description: "Site ID"
          required: true
          type: "string"        
        - in: "body"
          name: "body"
          description: ""
          required: true
          schema:
            $ref: "#/definitions/PageInput"
      responses:
        200:
          description: ""
          schema:
            $ref: "#/definitions/Page"

  /sites/{siteId}/pages/{pageId}:
    get:
      tags:
        - "pages"
      operationId: "getPage"
      parameters:
        - name: "siteId"
          in: "path"
          description: "Site ID"
          required: true
          type: "string"
        - name: "pageId"
          in: "path"
          description: "Page ID"
          required: true
          type: "string"
      responses:
        200:
          description: ""
          schema:
            $ref: "#/definitions/Page"
    delete:
      tags:
        - "pages"
      operationId: "deletePage"
      parameters:
        - name: "siteId"
          in: "path"
          description: "Site ID"
          required: true
          type: "string"
        - name: "pageId"
          in: "path"
          description: "Page ID"
          required: true
          type: "string"
      responses:
        204:
          description: ""

  /sites/:
    get:
      tags:
        - "sites"
      operationId: "listSites"
      responses:
        200:
          description: ""
          schema:
            type: "array"
            items:
              $ref: "#/definitions/Site"
    post:
      tags:
        - "sites"
      operationId: "createSite"
      parameters:
        - in: "body"
          name: "body"
          description: ""
          required: true
          schema:
            $ref: "#/definitions/SiteInput"
      responses:
        200:
          description: ""
          schema:
            $ref: "#/definitions/Site"

  /sites/{siteId}:
    get:
      tags:
        - "sites"
      operationId: "getSite"
      parameters:
        - name: "siteId"
          in: "path"
          description: "Site ID"
          required: true
          type: "string"
      responses:
        200:
          description: ""
          schema:
            $ref: "#/definitions/Site"
    delete:
      tags:
        - "sites"
      operationId: "deleteSite"
      parameters:
        - name: "siteId"
          in: "path"
          description: "Site ID"
          required: true
          type: "string"
      responses:
        204:
          description: ""

  /dataframes/{dataframeId}:
    get:
      tags:
        - "dataframes"
      operationId: "getDataframe"
      parameters:
        - name: "dataframeId"
          in: "path"
          description: "Dataframe ID"
          required: true
          type: "string"
      responses:
        200:
          description: ""
          schema:
            $ref: "#/definitions/Dataframe"
    post:
      tags:
        - "dataframes"
      operationId: "createDataframe"
      parameters:
        - in: "body"
          name: "body"
          description: ""
          required: true
          schema:
            $ref: "#/definitions/Dataframe"
      responses:
        200:
          description: ""
          schema:
            $ref: "#/definitions/Dataframe"
    delete:
      tags:
        - "dataframes"
      operationId: "deleteDataframe"
      parameters:
        - name: "dataframeId"
          in: "path"
          description: "Dataframe ID"
          required: true
          type: "string"
      responses:
        204:
          description: ""

definitions:
  Page:
    type: "object"
    properties:
      id:
        type: "string"
      title:
        type: "string"
        example: "Weekly Report"
      content:
        type: "object" # TBD
      site_id:
        type: "string"

  PageInput:
    type: "object"
    properties:
      title:
        type: "string"
        example: "Weekly Report"
      content:
        type: "string"

  Site:
    type: "object"
    properties:
      id:
        type: "string"
      name:
        type: "string"
        example: "foobar"
      slug:
        type: "string"
        example: "client-abc-weekly-report"
      default_page_id:
        type: "string"
      pages:
        type: "array"
        items: {
            $ref: "#/definitions/Page"
        }

  SiteInput:
    type: "object"
    properties:
      name:
        type: "string"
        example: "foobar"
      slug:
        type: "string"
        example: "client-abc-weekly-report"
      default_page_id:
        type: "string"

  Dataframe:
    type: "object"
    properties:
      id:
        type: "string"
      digest:
        type: "string"
      url:
        type: "string"
